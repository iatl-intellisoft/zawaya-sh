<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
    	<!-- Salary Structure -->
        <!-- Almoshraf Salary Structures -->
        <record id="structure_employee_almoshraf_1" model="hr.payroll.structure">
            <field name="name">Almoshraf Employee Salary Structure</field>
            <field name="type_id" ref="hr_contract.structure_type_employee"/>
            <field name="country_id" eval="False"/>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="structure_employee_almoshraf_2" model="hr.payroll.structure">
            <field name="name">Almoshraf Employee Bouns Structure</field>
            <field name="type_id" ref="hr_contract.structure_type_employee"/>
            <field name="country_id" eval="False"/>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="structure_employee_almoshraf_3" model="hr.payroll.structure">
            <field name="name">Almoshraf Employee Salary/Bouns Structure</field>
            <field name="type_id" ref="hr_contract.structure_type_employee"/>
            <field name="country_id" eval="False"/>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>

        <!-- Salary Structure Rules -->
        <record id="hr_salary_rule_basic" model="hr.salary.rule">
            <field name="name">Basic Salary</field>
            <field name="code">BASIC</field>
            <field name="category_id" ref="hr_payroll.BASIC"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="1"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.5544</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_cola" model="hr.salary.rule">
            <field name="name">Cost Of Living</field>
            <field name="code">COLA</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.1056</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_hos" model="hr.salary.rule">
            <field name="name">Housing</field>
            <field name="code">HOS</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.20</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_trans" model="hr.salary.rule">
            <field name="name">Transportation</field>
            <field name="code">TRANS</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.14</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_medical" model="hr.salary.rule">
            <field name="name">Medical Insurance</field>
            <field name="code">MED_INS</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = contract.medical_amount</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_si" model="hr.salary.rule">
            <field name="name">Social Insurance</field>
            <field name="code">SI</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">if contract.no_social:
    result = 0.0
else:
    result = payslip.paid_amount * 0.08</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_breakfast" model="hr.salary.rule">
            <field name="name">Breakfast</field>
            <field name="code">BREAKFAST</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">fix</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">0.0</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_injury" model="hr.salary.rule">
            <field name="name">Work Injury</field>
            <field name="code">WORK_INJURY</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">leaves = payslip.env['hr.leave'].search([('employee_id','=',employee.id),('is_work_injury','=',True),('state','=','validate')])
days = 0.0
for leave in leaves:
    if leave.date_from.year == payslip.date_from.year:
        days += leave.number_of_days
if days >= 1 and days &lt;= 66:
    result = 0.0
elif days >= 67 and days &lt;= 132:
    result = payslip.paid_amount / 2
elif days >= 133 and days &lt;= 198:
    result = payslip.paid_amount - payslip.paid_amount / 4
elif days > 198:
    result = payslip.paid_amount
else:
    result = 0.0</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_net" model="hr.salary.rule">
            <field name="name">Net Salary</field>
            <field name="code">NET</field>
            <field name="category_id" ref="hr_payroll.NET"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_1"/>
            <field name="sequence" eval="199"/>
            <field name="amount_python_compute">leaves = payslip.env['hr.leave'].search([('employee_id','=',employee.id),('is_work_injury','=',True),('state','=','validate')])
days = 0.0
for leave in leaves:
    if leave.date_from.year == payslip.date_from.year:
        days += leave.number_of_days
if days > 66:
    result = categories.BASIC + categories.ALW - WORK_INJURY
else:
    result = categories.BASIC + categories.ALW - categories.DED</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        

        <!-- Salary/Bouns Structure Rules -->
        <record id="hr_salary_rule_basic2" model="hr.salary.rule">
            <field name="name">Basic Salary</field>
            <field name="code">BASIC</field>
            <field name="category_id" ref="hr_payroll.BASIC"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="1"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.5544</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_cola2" model="hr.salary.rule">
            <field name="name">Cost Of Living</field>
            <field name="code">COLA</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.1056</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_hos2" model="hr.salary.rule">
            <field name="name">Housing</field>
            <field name="code">HOS</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.20</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_trans2" model="hr.salary.rule">
            <field name="name">Transportation</field>
            <field name="code">TRANS</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = payslip.paid_amount * 0.14</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_medical2" model="hr.salary.rule">
            <field name="name">Medical Insurance</field>
            <field name="code">MED_INS</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">result = contract.medical_amount</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_bouns" model="hr.salary.rule">
            <field name="name">Bouns</field>
            <field name="code">BOUNS</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="150"/>
            <field name="amount_python_compute">result = contract.bouns</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_si2" model="hr.salary.rule">
            <field name="name">Social Insurance</field>
            <field name="code">SI</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">if contract.no_social:
    result = 0.0
else:
    result = payslip.paid_amount * 0.08</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_breakfast2" model="hr.salary.rule">
            <field name="name">Breakfast</field>
            <field name="code">BREAKFAST</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">fix</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">0.0</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_injury2" model="hr.salary.rule">
            <field name="name">Work Injury</field>
            <field name="code">WORK_INJURY</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="5"/>
            <field name="amount_python_compute">leaves = payslip.env['hr.leave'].search([('employee_id','=',employee.id),('is_work_injury','=',True),('state','=','validate')])
days = 0.0
for leave in leaves:
    if leave.date_from.year == payslip.date_from.year:
        days += leave.number_of_days
if days >= 1 and days &lt;= 66:
    result = 0.0
elif days >= 67 and days &lt;= 132:
    result = payslip.paid_amount / 2
elif days >= 133 and days &lt;= 198:
    result = payslip.paid_amount - payslip.paid_amount / 4
elif days > 198:
    result = payslip.paid_amount
else:
    result = 0.0</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
        <record id="hr_salary_rule_net2" model="hr.salary.rule">
            <field name="name">Net Salary</field>
            <field name="code">NET</field>
            <field name="category_id" ref="hr_payroll.NET"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_3"/>
            <field name="sequence" eval="199"/>
            <field name="amount_python_compute">leaves = payslip.env['hr.leave'].search([('employee_id','=',employee.id),('is_work_injury','=',True),('state','=','validate')])
days = 0.0
for leave in leaves:
    if leave.date_from.year == payslip.date_from.year:
        days += leave.number_of_days
if days > 66:
    result = categories.BASIC + categories.ALW - WORK_INJURY
else:
    result = categories.BASIC + categories.ALW - categories.DED</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>



        <!-- Bouns Structure Rules -->
        <record id="hr_salary_rule_bouns2" model="hr.salary.rule">
            <field name="name">Bouns</field>
            <field name="code">BOUNS</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="amount_select">code</field>
            <field name="struct_id" ref="hr_payroll_custom.structure_employee_almoshraf_2"/>
            <field name="sequence" eval="150"/>
            <field name="amount_python_compute">result = contract.bouns</field>
            <!-- <field name="company_id" ref="base.main_company"/> -->
        </record>
    </data>
</odoo>
